// Định nghĩa đối tượng Cookie để quản lý cookie trong trình duyệt
const Cookie = {
    // Phương thức lấy giá trị của cookie theo tên
    get: function (t) {
        t += "="; // Thêm dấu "=" vào tên cookie để tìm kiếm (ví dụ: "product_1=")
        let e = document.cookie.split(";"); // Tách các cookie thành mảng (mỗi cookie cách nhau bởi dấu ";")

        // Duyệt qua từng cookie trong mảng
        for (let n = 0; n < e.length; n++) {
            let o = e[n]; // Lấy cookie hiện tại

            // Xóa khoảng trắng ở đầu chuỗi cookie (nếu có)
            for (; " " == o.charAt(0);) {
                o = o.substring(1);
            }

            // Kiểm tra nếu cookie bắt đầu bằng tên cần tìm
            if (0 == o.indexOf(t)) {
                return o.substring(t.length, o.length); // Trả về giá trị của cookie (phần sau dấu "=")
            }
        }
        return null; // Trả về null nếu không tìm thấy cookie
    },

    // Phương thức đặt giá trị cho cookie
    set: function (t, e, n) {
        const o = new Date(); // Tạo đối tượng ngày giờ hiện tại
        o.setTime(o.getTime() + 24 * n * 60 * 60 * 1000); // Tính thời gian hết hạn (n ngày sau hiện tại)
        let i = "expires=" + o.toUTCString(); // Định dạng thời gian hết hạn theo chuẩn UTC

        // Đặt cookie với tên (t), giá trị (e), thời gian hết hạn (i), và đường dẫn (path=/)
        document.cookie = t + "=" + e + ";" + i + ";path=/";
    },

    // Phương thức xóa cookie
    remove: function (t) {
        const e = new Date(); // Tạo đối tượng ngày giờ hiện tại
        e.setTime(e.getTime() - 100000); // Đặt thời gian hết hạn về quá khứ (hết hạn ngay lập tức)
        let n = "expires=" + e.toUTCString(); // Định dạng thời gian hết hạn

        // Đặt cookie với giá trị rỗng và thời gian hết hạn để xóa cookie
        document.cookie = t + "=;" + n + ";path=/";
    },

    // Phương thức đếm tổng số lượng sản phẩm trong giỏ hàng (dựa trên giá trị của cookie)
    countProduct: function () {
        let t = 0, e = 0; // t: giá trị tạm, e: tổng số lượng sản phẩm
        let n = document.cookie.split(";"); // Tách các cookie thành mảng

        // Duyệt qua từng cookie
        for (let o = 0; o < n.length; o++) {
            let i = /(?<==).*/g; // Regex để lấy giá trị sau dấu "=" (giá trị số lượng)
            t = n[o].match(i); // Lấy giá trị số lượng từ cookie

            // Nếu tìm thấy giá trị, cộng dồn vào tổng số lượng
            if (null != t) {
                e += Number(t[0]); // Chuyển giá trị thành số và cộng vào tổng
            }
        }
        return e; // Trả về tổng số lượng sản phẩm
    },

    // Phương thức đếm số lượng cookie có tiền tố cụ thể (ví dụ: "product_")
    countWithPrefix: function (t) {
        let e = 0; // Đếm số lượng cookie
        let n = document.cookie.split(";"); // Tách các cookie thành mảng

        // Duyệt qua từng cookie
        for (let o = 0; o < n.length; o++) {
            let i = n[o]; // Lấy cookie hiện tại

            // Xóa khoảng trắng ở đầu chuỗi cookie (nếu có)
            for (; " " == i.charAt(0);) {
                i = i.substring(1);
            }

            // Nếu cookie bắt đầu bằng tiền tố (t), tăng biến đếm
            if (0 == i.indexOf(t)) {
                e++;
            }
        }
        return e; // Trả về số lượng cookie có tiền tố t
    }
};